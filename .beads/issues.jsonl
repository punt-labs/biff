{"id":"biff-37y","title":"Messaging tools: send_message, check_messages","status":"open","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:07.148638-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:23:07.148638-08:00","dependencies":[{"issue_id":"biff-37y","depends_on_id":"biff-hks","type":"blocks","created_at":"2026-02-13T18:24:55.910212-08:00","created_by":"\"jmf-pobox\""},{"issue_id":"biff-37y","depends_on_id":"biff-x73","type":"blocks","created_at":"2026-02-13T18:24:58.543761-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-4rg","title":"Phase 1: Core MCP server","description":"Implement the foundational biff commands as an MCP server.\n\nCommands: /mesg, /who, /plan, /finger, /biff on|off\nLocal relay for same-machine communication.\nSingle-user value from /plan and session awareness.\n.biff file configuration (relay URL, whitelisted IDs).\n\nExit criteria: an engineer can install biff, set their plan, see active sessions, and send a message to a teammate on the same machine.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T15:25:20.011554-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T15:25:20.011554-08:00","labels":["epic","phase"],"dependencies":[{"issue_id":"biff-4rg","depends_on_id":"biff-6k7","type":"blocks","created_at":"2026-02-13T16:39:51.110286-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-6k7","title":"Spike: MCP notification rendering and subprocess handoff","description":"Validate two critical feasibility questions before committing to the full Phase 1 implementation.\n\n**Question 1: MCP notifications for receiving messages**\nCan an MCP server push a notification to Claude Code that renders visibly in the terminal? Test:\n- Create a minimal MCP server that fires a notification after a delay\n- Verify it appears in the Claude Code session without a tool call\n- Assess rendering quality (plain text? formatted? inline with conversation?)\n\n**Question 2: Subprocess handoff for /talk**\nCan an MCP server spawn an interactive subprocess that takes over terminal I/O, then return control to Claude Code cleanly? Test:\n- MCP tool call spawns a simple interactive process (e.g., a chat loop)\n- User types directly to the subprocess (no LLM intermediation)\n- Process exits, Claude Code resumes normally\n- Assess the UX transition (seamless or jarring?)\n\n**Exit criteria:**\n- Clear yes/no on both questions with evidence\n- If notifications work: document the API and rendering constraints\n- If subprocess handoff works: document the mechanism and UX quality\n- If either fails: document alternatives and revised approach for /mesg and /talk\n\n**Timeframe:** 1-2 days","notes":"Spike results (2026-02-13):\n\nQ1 (MCP notifications render?): NO - notifications/message silently dropped by Claude Code (issue #3174, closed not planned).\nQ2 (Subprocess handoff?): NO - stdio transport reserves stdout for JSON-RPC, no PTY allocation.\n\nALTERNATIVE DISCOVERED: HTTP transport + tools/list_changed\n- FastMCP HTTP transport works (Streamable HTTP + SSE)\n- Dynamic tool descriptions update via remove_tool/re-register\n- notifications/tools/list_changed automatically sent on SSE channel\n- Server-side validated via curl (all 5 checks pass)\n- Same pattern used by Slack MCP server in production\n- Claude Code end-to-end test pending (needs new session)\n\nRECOMMENDATION: Proceed with HTTP transport architecture for Phase 1.\nArchitecture documented in docs/prd/biff-phase1-communication.md and docs/sparc/phase1-implementation.md","status":"closed","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T16:39:47.189963-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:44:55.620389-08:00","closed_at":"2026-02-13T18:44:55.620389-08:00","close_reason":"Server-side validation complete. All 5 checks pass. HTTP transport + tools/list_changed is viable. Architecture recommendation: proceed with HTTP transport. Claude Code e2e test deferred to new session.","labels":["phase-1","spike"]}
{"id":"biff-8t3","title":"Phase 3: Real-time conversation, pairing, and security","description":"Add synchronous communication and the session-sharing feature.\n\nCommands: /talk, /pair\n/talk: real-time bidirectional text conversation between two terminals.\n/pair: invite a teammate to send input to your Claude Code session with explicit consent model.\nEnd-to-end encryption for all message types.\nSecurity audit of the permission model.\n\nExit criteria: two engineers can hold a real-time conversation and pair on a Claude session with proper consent and encryption.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T15:25:32.868851-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T15:25:32.868851-08:00","labels":["epic","phase"],"dependencies":[{"issue_id":"biff-8t3","depends_on_id":"biff-iok","type":"blocks","created_at":"2026-02-13T16:23:56.138756-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-8xu","title":".biff config file parser","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:22:57.816895-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:22:57.816895-08:00","dependencies":[{"issue_id":"biff-8xu","depends_on_id":"biff-jge","type":"blocks","created_at":"2026-02-13T18:24:45.991178-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-9xj","title":"Message watcher + dynamic tool descriptions","status":"open","priority":0,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:10.132345-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:23:10.132345-08:00","dependencies":[{"issue_id":"biff-9xj","depends_on_id":"biff-x73","type":"blocks","created_at":"2026-02-13T18:25:01.266105-08:00","created_by":"\"jmf-pobox\""},{"issue_id":"biff-9xj","depends_on_id":"biff-37y","type":"blocks","created_at":"2026-02-13T18:25:03.821906-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-b01","title":"Integration tests + quality gates","status":"open","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:18.145377-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:23:18.145377-08:00","dependencies":[{"issue_id":"biff-b01","depends_on_id":"biff-ofy","type":"blocks","created_at":"2026-02-13T18:25:11.749375-08:00","created_by":"\"jmf-pobox\""},{"issue_id":"biff-b01","depends_on_id":"biff-37y","type":"blocks","created_at":"2026-02-13T18:25:14.358111-08:00","created_by":"\"jmf-pobox\""},{"issue_id":"biff-b01","depends_on_id":"biff-9xj","type":"blocks","created_at":"2026-02-13T18:25:17.058179-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-bv5","title":"Phase 4: Hosted relay service (biff teams)","description":"Launch the paid hosted offering.\n\nManaged relay with 99.9% uptime SLA.\nEnd-to-end encryption with key management.\nAudit logs and compliance exports.\nTeam admin controls (permissions, onboarding, offboarding).\nBilling integration.\n\nExit criteria: a team can sign up for biff teams, configure their relay, and have a managed, auditable communication layer.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T15:25:39.154258-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T15:25:39.154258-08:00","labels":["epic","phase"],"dependencies":[{"issue_id":"biff-bv5","depends_on_id":"biff-8t3","type":"blocks","created_at":"2026-02-13T16:23:56.228225-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-czx","title":"Spike: validate tools/list_changed in Claude Code","notes":"Server-side validation complete (5/5 checks pass). Remaining: Claude Code e2e test — does Claude Code act on notifications/tools/list_changed and show updated tool descriptions? Requires session restart with biff-spike registered in .mcp.json.","status":"closed","priority":0,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:13.074042-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:57:29.643458-08:00","closed_at":"2026-02-13T18:57:29.643458-08:00","close_reason":"E2E validated: Claude Code acts on tools/list_changed. Dynamic tool descriptions update in real-time. Full chain confirmed: simulate_message → remove/re-register tool → list_changed notification on SSE → Claude Code refreshes → updated description visible to Claude."}
{"id":"biff-hks","title":"Storage layer: inbox.py and sessions.py","status":"open","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:22:55.326517-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:22:55.326517-08:00","dependencies":[{"issue_id":"biff-hks","depends_on_id":"biff-jge","type":"blocks","created_at":"2026-02-13T18:24:42.996974-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-iok","title":"Phase 2: Network relay and team commands","description":"Enable cross-machine messaging and team-level commands.\n\nCommands: /wall, /hive, /send, /cr\nNetwork relay (WebSocket) for remote communication.\n/hive temporary groups with /wall broadcasting within them.\n/send for sharing diffs, files, snippets with full context.\n/cr for code review requests with automatic diff attachment.\n\nExit criteria: a distributed team can communicate end-to-end through biff across machines.","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T15:25:26.267422-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T15:25:26.267422-08:00","labels":["epic","phase"],"dependencies":[{"issue_id":"biff-iok","depends_on_id":"biff-4rg","type":"blocks","created_at":"2026-02-13T16:23:56.052507-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-jge","title":"Data models: Message, UserSession, BiffConfig","status":"open","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:22:52.961011-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:22:52.961011-08:00"}
{"id":"biff-nmt","title":"CLI entry point with transport flag","status":"open","priority":2,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:15.479711-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:23:15.479711-08:00","dependencies":[{"issue_id":"biff-nmt","depends_on_id":"biff-x73","type":"blocks","created_at":"2026-02-13T18:25:09.263904-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-ofy","title":"Presence tools: set_plan, who, finger, biff_toggle","status":"open","priority":1,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:04.126941-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:23:04.126941-08:00","dependencies":[{"issue_id":"biff-ofy","depends_on_id":"biff-hks","type":"blocks","created_at":"2026-02-13T18:24:50.809895-08:00","created_by":"\"jmf-pobox\""},{"issue_id":"biff-ofy","depends_on_id":"biff-x73","type":"blocks","created_at":"2026-02-13T18:24:53.336978-08:00","created_by":"\"jmf-pobox\""}]}
{"id":"biff-x73","title":"MCP server scaffold with HTTP/stdio transport","status":"open","priority":0,"issue_type":"task","owner":"jmf@pobox.com","created_at":"2026-02-13T18:23:01.66618-08:00","created_by":"\"jmf-pobox\"","updated_at":"2026-02-13T18:23:01.66618-08:00","dependencies":[{"issue_id":"biff-x73","depends_on_id":"biff-jge","type":"blocks","created_at":"2026-02-13T18:24:48.320616-08:00","created_by":"\"jmf-pobox\""}]}
